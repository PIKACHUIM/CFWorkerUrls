<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>çš®å¡çŸ­é“¾æœåŠ¡</title>
    <link href="/static/style.css" rel="stylesheet"/>
</head>
<body>
<div class="container">
    <div class="form-container">
        <h1>ç½‘ç«™çŸ­é“¾æœåŠ¡</h1>
        <div class="form-group">
            <label for="suffix_full" style="display: inline-block;">ç”Ÿæˆé“¾æ¥ï¼š</label>
            <a id="suffix_link" href="">
                <div id="suffix_full" style="display: inline-block;"></div>
            </a>
        </div>
        <div class="form-group">
            <label for="tokens_text" style="display: inline-block;">æ›´æ–°å¯†ç ï¼š</label>
            <div id="tokens_text" style="display: inline-block;"></div>
        </div>
        <div class="form-group">
            <label for="expire_days" style="display: inline-block;">è¿‡æœŸæ—¶é—´ï¼š</label>
            <div id="expire_days" style="display: inline-block;"></div>
        </div>
        <br/><br/>
        <button class="modify-btn" onclick="onPost()">ä¿®æ”¹é“¾æ¥</button>
        <br/><br/>
        <button class="update-btn" onclick="location.href='/';">è¿”å›ä¸»é¡µ</button>
        <button class="github-btn" onclick="location.href='https://github.com/PIKACHUIM/CFWorkerUrls';">ğŸ±GitHub</button>
    </div>
</div>
<script>
    // é¡µé¢è½½å…¥å‡½æ•° #######################################################
    function onLoad(name) {
        const queryString = window.location.search;
        // ä½¿ç”¨URLSearchParamsè§£ææŸ¥è¯¢å­—ç¬¦ä¸² ==============================
        const urlParams = new URLSearchParams(queryString);
        // åˆ¤æ–­æ˜¯å¦åŒ…å«tokenså‚æ•° =========================================
        if (urlParams.has('suffix')) {
            const suffix = urlParams.get('suffix');
            const suffix_full = document.getElementById('suffix_full');
            const suffix_link = document.getElementById('suffix_link');
            suffix_full.textContent = suffix;
            suffix_link.href = suffix;

        }
        if (urlParams.has('tokens')) {
            const tokens = urlParams.get('tokens');
            const tokens_text = document.getElementById('tokens_text');
            tokens_text.textContent = tokens;
        }
        if (urlParams.has('expire')) {
            const expire = urlParams.get('expire');
            const expire_days = document.getElementById('expire_days');
            const date_t = new Date(Number(expire));
            expire_days.textContent = date_t.toISOString().substring(0, 19);
        }
    }

    // æäº¤è¡¨å•å‡½æ•° #######################################################
    function onPost(name) {
        // ä½¿ç”¨URLSearchParamsè§£ææŸ¥è¯¢å­—ç¬¦ä¸² ==============================
        const queryString = window.location.search;
        const urlParams = new URLSearchParams(queryString);
        const suffix_full = urlParams.get('suffix');
        const tokens_text = urlParams.get('tokens');
        window.open("/a/?update=1" +
            "&suffix=" + suffix_full +
            "&tokens=" + tokens_text
        );
    }

    // é¡µé¢åŠ è½½é€»è¾‘ #######################################
    onLoad();
</script>

</body>
</html>